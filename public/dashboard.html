<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard Reseller - RizxMods</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen flex flex-col items-center justify-center bg-gradient-to-tr from-slate-900 via-slate-800 to-indigo-900">

  <!-- Header -->
  <div class="mb-10 text-center animate-fadein">
    <h2 class="text-4xl font-extrabold mb-4 drop-shadow-lg text-white">ðŸš€ Panel Reseller RizxMods</h2>
    <div class="text-indigo-200 text-base font-medium">Buat server Pterodactyl dengan mudah & cepat</div>
  </div>

  <!-- Form -->
  <form id="createPanelForm" class="bg-slate-800/80 border border-indigo-500/30 shadow-xl p-8 rounded-2xl max-w-md w-full space-y-6 animate-pop">
    <!-- Username Input -->
    <div class="flex items-center gap-2">
      <span class="bg-slate-700 text-indigo-300 rounded-full p-3">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A13.937 13.937 0 0112 15c2.485 0 4.797.606 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
      </span>
      <input type="text" id="username" class="flex-1 p-3 rounded-lg bg-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="Username Panel" required />
    </div>
    <!-- Panel Name Input -->
    <div class="flex items-center gap-2">
      <span class="bg-slate-700 text-indigo-300 rounded-full p-3">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6l4 2" />
        </svg>
      </span>
      <input type="text" id="panelName" class="flex-1 p-3 rounded-lg bg-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="Nama Server" required />
    </div>
    <!-- RAM Selection -->
    <div class="flex items-center gap-2">
      <span class="bg-slate-700 text-indigo-300 rounded-full p-3">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 17l4-4 4 4m0 0V7m0 10a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
      </span>
      <select id="ram" class="flex-1 p-3 rounded-lg bg-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500">
        <option value="1024">RAM 1 GB</option>
        <option value="2048">RAM 2 GB</option>
        <option value="3072">RAM 3 GB</option>
        <option value="4096">RAM 4 GB</option>
        <option value="5120">RAM 5 GB</option>
        <option value="6144">RAM 6 GB</option>
        <option value="7168">RAM 7 GB</option>
        <option value="8192">RAM 8 GB</option>
        <option value="9216">RAM 9 GB</option>
        <option value="10240">RAM 10 GB</option>
        <option value="0">RAM Unlimited</option>
      </select>
    </div>
    <!-- Submit Button with Hover Effect -->
    <button class="bg-gradient-to-r from-green-500 via-emerald-500 to-teal-600 hover:from-green-600 hover:to-teal-700 p-3 rounded-xl w-full font-bold text-lg text-white shadow-lg transition-transform active:scale-95 animate-btnpop" type="submit">
      ðŸš€ Buat Panel
    </button>
  </form>

  <!-- Success Modal with Animation -->
  <div id="successModal" class="fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-60 hidden">
    <div class="bg-slate-800 px-6 py-8 rounded-2xl shadow-xl text-center animate-pop">
      <div class="text-5xl mb-3 animate-celebrate">ðŸŽ‰</div>
      <div class="font-bold text-xl mb-2 text-green-400">Panel berhasil dibuat!</div>
      <button onclick="closeSuccessModal()" class="mt-3 px-6 py-2 bg-green-600 hover:bg-green-700 rounded-lg text-white font-semibold shadow">Tutup</button>
    </div>
  </div>

  <style>
    @keyframes pop {
      0% { transform: scale(0.8); opacity: 0;}
      100% { transform: scale(1); opacity: 1;}
    }
    .animate-pop { animation: pop 0.25s cubic-bezier(.4,2,.6,1);}
    @keyframes fadein {
      from { opacity: 0; transform: translateY(-24px);}
      to { opacity: 1; transform: translateY(0);}
    }
    .animate-fadein { animation: fadein 0.8s cubic-bezier(.4,2,.6,1);}
    @keyframes celebrate {
      0%,100% { transform: rotate(0deg);}
      20% { transform: rotate(-10deg);}
      40% { transform: rotate(10deg);}
      60% { transform: rotate(-6deg);}
      80% { transform: rotate(6deg);}
    }
    .animate-celebrate { animation: celebrate 0.9s; }
    @keyframes btnpop {
      0% { transform: scale(0.93);}
      100% { transform: scale(1);}
    }
    .animate-btnpop { animation: btnpop 0.2s cubic-bezier(.4,2,.6,1);}
  </style>

  <script>
    document.getElementById("createPanelForm").addEventListener("submit", async function(e) {
      e.preventDefault();
      const username = document.getElementById("username").value.trim();
      const panelName = document.getElementById("panelName").value.trim();
      const ram = document.getElementById("ram").value;
      const cpu = 0; // selalu unlimited!
      const email = username + "@gmail.com";

      const res = await fetch("/api/create-panel", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          username,
          email,
          serverName: panelName,
          ram,
          cpu
        })
      });
      const data = await res.json();
      if (res.ok) {
        document.getElementById("username").value = "";
        document.getElementById("panelName").value = "";
        document.getElementById("ram").selectedIndex = 0;
        showSuccessModal();
      } else {
        alert(data.error || "Gagal membuat panel");
      }
    });

    function showSuccessModal() {
      document.getElementById("successModal").classList.remove("hidden");
    }
    function closeSuccessModal() {
      document.getElementById("successModal").classList.add("hidden");
    }
  </script>
</body>
</html>